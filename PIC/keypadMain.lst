gpasm-1.4.0 #1107 (Feb 13 2015) keypadMain.as   12-4-2015  20:53:46         PAGE  1


LOC    OBJECT CODE    LINE  SOURCE TEXT
  VALUE

                      00001      ;===============================================================;
                      00002      ;                                                                                                  
                                             ;
                      00003      ;                    Mortaza Mak Asaadi                                                         ;
                      00004      ;                                                                                                  
                                             ;
                      00005      ;                                                                                                  
                                                     ;
                      00006      ;===============================================================;
                      00007     
                      00008 ;--------------------------------------------------------------------------------configs
                      00009 LIST    p=pic18f452,f=inhx32,n=0,st=off,r=hex
                      00010 CONFIG  osc=hs,oscs=off,wdt=off,pwrt=on,bor=off
                      00011 CONFIG  debug=off,lvp=off,stvr=off
                      00012 ;--------------------------------------------------------------------------------include
                      00013 #include "/usr/share/gputils/header/p18f452.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Aug 07 2014
                      00005 ;  MPASM PIC18F452 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2014 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      01255         LIST
                      00014 ;--------------------------------------------------------------------------------definitions&aliases
  00000F81            00015 keypadP EQU PORTB                                                               
  00000F93            00016 keypadT EQU TRISB
                      00017 
  00000025            00018 keypadState EQU 0x25
                      00019 
  00000026            00020 delayOuter EQU 0x26
  00000027            00021 delayOut EQU 0x27
  00000028            00022 delayIn EQU 0x28
                      00023 ;--------------------------------------------------------------------------------program starts here
000000                00024 main:           ORG 0x00                                                                                
                                                                    ;writing over intrupt table
                      00025                                                                                                         
                                                                                    ;we don't need it anyway
                      00026                                                                                                         
                                                                                    ;fornow...
                      00027                                                                                                         
                                                                                    ;hell-yeah! more space!!!
                      00028                                                                                 
                      00029 ;--------------------------------------------------------------------------------setting up serial port
000000 0E20           00030                 MOVLW 0x20                                                      
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0xac}.
Message[1301]: Using default destination of 0 (Access Bank).
000002 6EAC           00031                 MOVWF TXSTA                                                                             
                                                                            ;enable send on serial
000004 0E19           00032                 MOVLW 0x19
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0xaf}.
Message[1301]: Using default destination of 0 (Access Bank).
000006 6EAF           00033                 MOVWF SPBRG                                                                             
                                                                            ;set serial speed
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x94}.
000008 9C94           00034                 BCF TRISC,TX                                                                            
                                                                    ;enable TX as output 
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0xab}.
00000A 8EAB           00035                 BSF RCSTA,SPEN                                                                          
                                                                    ;enable serial
                      00036                 
00000C                00037 startOver:
                      00038 ;--------------------------------------------------------------------------------reading keypad upper ni
                            bble
00000C 0EF0           00039                 MOVLW 0xf0                                                                              
                                                                            ;iiiixxxx
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x93}.
Message[1301]: Using default destination of 0 (Access Bank).
00000E 6E93           00040                 MOVWF keypadT
000010 0000           00041                 NOP                                                                     
000012 0E0F           00042                 MOVLW 0x0f
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x81}.
Message[305]: Using default destination of 1 (file).
000014 1281           00043                 IORWF keypadP
000016 0000           00044                 NOP
000018 0000           00045                 NOP
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x81}.
00001A 5081           00046                 MOVF keypadP,W
00001C 0BF0           00047                 ANDLW 0xf0
Message[1301]: Using default destination of 0 (Access Bank).
00001E 6E25           00048                 MOVWF keypadState
                      00049 
                      00050 ;--------------------------------------------------------------------------------reading keypad lower ni
                            bble
000020 0E0F           00051                 MOVLW 0x0f                                                                              
                                                                            ;xxxxiiii
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x93}.
Message[1301]: Using default destination of 0 (Access Bank).
000022 6E93           00052                 MOVWF keypadT
000024 0000           00053                 NOP
000026 0EF0           00054                 MOVLW 0xf0
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x81}.
Message[305]: Using default destination of 1 (file).
000028 1281           00055                 IORWF keypadP
00002A 0000           00056                 NOP
00002C 0000           00057                 NOP
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x81}.
00002E 5081           00058                 MOVF keypadP,W
000030 0B0F           00059                 ANDLW 0x0f
Message[305]: Using default destination of 1 (file).
000032 1225           00060                 IORWF keypadState
                      00061 
                      00062 ;--------------------------------------------------------------------------------check keyState and send
                             serial
                      00063                                                                                                         
                                                                                    ;only if one key pressed
000034 0E11           00064 if1:            MOVLW 0x11                                                                              
                                                                    ;for now ofcourse
Message[1301]: Using default destination of 0 (Access Bank).
000036 6225           00065                         CPFSEQ keypadState                                                              
                                                                    ;next improvement:
000038 D003           00066                         BRA if2                                                                         
                                                                            ;enable multikey press
00003A 0E41           00067                         MOVLW A'A'
00003C EC7E F000      00068                         CALL TRANS
                      00069 
000040 0E21           00070 if2:            MOVLW 0x21
Message[1301]: Using default destination of 0 (Access Bank).
000042 6225           00071                         CPFSEQ keypadState
000044 D003           00072                         BRA if3
000046 0E42           00073                         MOVLW A'B'
000048 EC7E F000      00074                         CALL TRANS
                      00075 
00004C 0E41           00076 if3:            MOVLW 0x41
Message[1301]: Using default destination of 0 (Access Bank).
00004E 6225           00077                         CPFSEQ keypadState
000050 D003           00078                         BRA if4
000052 0E43           00079                         MOVLW A'C'
000054 EC7E F000      00080                         CALL TRANS
                      00081 
000058 0E81           00082 if4:            MOVLW 0x81
Message[1301]: Using default destination of 0 (Access Bank).
00005A 6225           00083                         CPFSEQ keypadState
00005C D003           00084                         BRA if5
00005E 0E44           00085                         MOVLW A'D'
000060 EC7E F000      00086                         CALL TRANS
                      00087 
000064 0E12           00088 if5:            MOVLW 0x12
Message[1301]: Using default destination of 0 (Access Bank).
000066 6225           00089                         CPFSEQ keypadState
000068 D003           00090                         BRA if6
00006A 0E45           00091                         MOVLW A'E'
00006C EC7E F000      00092                         CALL TRANS
                      00093 
000070 0E22           00094 if6:            MOVLW 0x22
Message[1301]: Using default destination of 0 (Access Bank).
000072 6225           00095                         CPFSEQ keypadState
000074 D003           00096                         BRA if7
000076 0E46           00097                         MOVLW A'F'
000078 EC7E F000      00098                         CALL TRANS
                      00099 
00007C 0E42           00100 if7:        MOVLW 0x42
Message[1301]: Using default destination of 0 (Access Bank).
00007E 6225           00101                         CPFSEQ keypadState
000080 D003           00102                         BRA if8
000082 0E47           00103                         MOVLW A'G'
000084 EC7E F000      00104                         CALL TRANS
                      00105 
000088 0E82           00106 if8:            MOVLW 0x82
Message[1301]: Using default destination of 0 (Access Bank).
00008A 6225           00107                         CPFSEQ keypadState
00008C D003           00108                         BRA if9
00008E 0E48           00109                         MOVLW A'H'      
000090 EC7E F000      00110                         CALL TRANS
                      00111 
000094 0E14           00112 if9:            MOVLW 0x14
Message[1301]: Using default destination of 0 (Access Bank).
000096 6225           00113                         CPFSEQ keypadState
000098 D003           00114                         BRA if10
00009A 0E49           00115                         MOVLW A'I'      
00009C EC7E F000      00116                         CALL TRANS
                      00117 
0000A0 0E24           00118 if10:           MOVLW 0x24
Message[1301]: Using default destination of 0 (Access Bank).
0000A2 6225           00119                         CPFSEQ keypadState
0000A4 D003           00120                         BRA if11
0000A6 0E4A           00121                         MOVLW A'J'
0000A8 EC7E F000      00122                         CALL TRANS
                      00123 
0000AC 0E44           00124 if11:       MOVLW 0x44
Message[1301]: Using default destination of 0 (Access Bank).
0000AE 6225           00125                         CPFSEQ keypadState
0000B0 D003           00126                         BRA if12
0000B2 0E4B           00127                         MOVLW A'K'
0000B4 EC7E F000      00128                         CALL TRANS
                      00129 
0000B8 0E84           00130 if12:       MOVLW 0x84
Message[1301]: Using default destination of 0 (Access Bank).
0000BA 6225           00131                         CPFSEQ keypadState
0000BC D003           00132                         BRA if13
0000BE 0E4C           00133                         MOVLW A'L'
0000C0 EC7E F000      00134                         CALL TRANS
                      00135 
0000C4 0E18           00136 if13:           MOVLW 0x18
Message[1301]: Using default destination of 0 (Access Bank).
0000C6 6225           00137                         CPFSEQ keypadState
0000C8 D003           00138                         BRA if14
0000CA 0E4D           00139                         MOVLW A'M'
0000CC EC7E F000      00140                         CALL TRANS
                      00141 
0000D0 0E28           00142 if14:           MOVLW 0x28
Message[1301]: Using default destination of 0 (Access Bank).
0000D2 6225           00143                         CPFSEQ keypadState
0000D4 D003           00144                         BRA if15
0000D6 0E4E           00145                         MOVLW A'N'
0000D8 EC7E F000      00146                         CALL TRANS
                      00147 
0000DC 0E48           00148 if15:           MOVLW 0x48
Message[1301]: Using default destination of 0 (Access Bank).
0000DE 6225           00149                         CPFSEQ keypadState
0000E0 D003           00150                         BRA if16
0000E2 0E4F           00151                         MOVLW A'O'
0000E4 EC7E F000      00152                         CALL TRANS
                      00153 
0000E8 0E88           00154 if16:           MOVLW 0x88
Message[1301]: Using default destination of 0 (Access Bank).
0000EA 6225           00155                         CPFSEQ keypadState
0000EC D003           00156                         BRA over
0000EE 0E50           00157                         MOVLW A'P'
0000F0 EC7E F000      00158                         CALL TRANS
0000F4 EC82 F000      00159 over:           CALL DELAY
0000F8 EF06 F000      00160                         GOTO  startOver
                      00161 ;--------------------------------------------------------------------------------transmit function      
                                    
0000FC                00162 TRANS:                                                                                                  
                                                                            ;transmits data to serial
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0x9e}.
0000FC A89E           00163 sendAgain:          BTFSS PIR1,TXIF
0000FE D7FE           00164                             BRA sendAgain
Message[302]: Register in operand not in bank 0. Ensure that bank bits are correct. Bank_bits = 0xf00, register{0xad}.
Message[1301]: Using default destination of 0 (Access Bank).
000100 6EAD           00165                             MOVWF TXREG
000102 0012           00166                             RETURN
                      00167 ;--------------------------------------------------------------------------------delay function         
                                
000104 0E03           00168 DELAY:              MOVLW 0x03                                                                          
                                                            ;creates roughly 
Message[1301]: Using default destination of 0 (Access Bank).
000106 6E26           00169                         MOVWF delayOuter                                                                
                                                            ;255*255*3*(1/4MHZ)s
000108 0EFF           00170 AGAIN:              MOVLW 0xff                                                                          
                                                            ;delay running on 16MHZ
Message[1301]: Using default destination of 0 (Access Bank).
00010A 6E27           00171                                 MOVWF delayOut
00010C 0EFF           00172 AGAIN1:         MOVLW 0xff
Message[1301]: Using default destination of 0 (Access Bank).
00010E 6E28           00173                                 MOVWF delayIn
000110 0000           00174 HERE:           NOP
000112 0000           00175                             NOP
000114 0628           00176                             DECF delayIn,F
000116 E1FC           00177                             BNZ HERE
000118 0627           00178                             DECF delayOut,F
00011A E1F8           00179                             BNZ AGAIN1
00011C 0626           00180                             DECF delayOuter,F
00011E E1F4           00181                             BNZ AGAIN
000120 0012           00182                             RETURN
                      00183                     
                      00184 ;--------------------------------------------------------------------------------end of program
Warning[205]: Found directive in column 1: "END"
                      00185 END                                                                                                     
                                                                                    ;Bye-Bye ;D


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XX-------------- ----------------
0000 : -XXX-XX-XXXXXX-- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Bytes Used:   301
Program Memory Bytes Free: 32467


Errors   :     0
Warnings :     1 reported,     0 suppressed
Messages :    40 reported,     0 suppressed

